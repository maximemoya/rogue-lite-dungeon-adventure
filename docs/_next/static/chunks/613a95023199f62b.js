(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16015,(e,s,t)=>{},98547,(e,s,t)=>{var i=e.i(47167);e.r(16015);var r=e.r(71645),n=r&&"object"==typeof r&&"default"in r?r:{default:r},o=void 0!==i.default&&i.default.env&&!0,a=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var s=void 0===e?{}:e,t=s.name,i=void 0===t?"stylesheet":t,r=s.optimizeForSpeed,n=void 0===r?o:r;d(a(i),"`name` must be a string"),this._name=i,this._deletedRulePlaceholder="#"+i+"-deleted-rule____{}",d("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var s,t=e.prototype;return t.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(s,t){return"number"==typeof t?e._serverSheet.cssRules[t]={cssText:s}:e._serverSheet.cssRules.push({cssText:s}),t},deleteRule:function(s){e._serverSheet.cssRules[s]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===e)return document.styleSheets[s]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,s){if(d(a(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof s&&(s=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,s),this._rulesCount++;if(this._optimizeForSpeed){var t=this.getSheet();"number"!=typeof s&&(s=t.cssRules.length);try{t.insertRule(e,s)}catch(s){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var i=this._tags[s];this._tags.push(this.makeStyleTag(this._name,e,i))}return this._rulesCount++},t.replaceRule=function(e,s){if(this._optimizeForSpeed||"undefined"==typeof window){var t="undefined"!=typeof window?this.getSheet():this._serverSheet;if(s.trim()||(s=this._deletedRulePlaceholder),!t.cssRules[e])return e;t.deleteRule(e);try{t.insertRule(s,e)}catch(i){o||console.warn("StyleSheet: illegal rule: \n\n"+s+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),t.insertRule(this._deletedRulePlaceholder,e)}}else{var i=this._tags[e];d(i,"old rule at index `"+e+"` not found"),i.textContent=s}return e},t.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var s=this._tags[e];d(s,"rule at index `"+e+"` not found"),s.parentNode.removeChild(s),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},t.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(s,t){return t?s=s.concat(Array.prototype.map.call(e.getSheetForTag(t).cssRules,function(s){return s.cssText===e._deletedRulePlaceholder?null:s})):s.push(null),s},[])},t.makeStyleTag=function(e,s,t){s&&d(a(s),"makeStyleTag accepts only strings as second parameter");var i=document.createElement("style");this._nonce&&i.setAttribute("nonce",this._nonce),i.type="text/css",i.setAttribute("data-"+e,""),s&&i.appendChild(document.createTextNode(s));var r=document.head||document.getElementsByTagName("head")[0];return t?r.insertBefore(i,t):r.appendChild(i),i},s=[{key:"length",get:function(){return this._rulesCount}}],function(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,s),e}();function d(e,s){if(!e)throw Error("StyleSheet: "+s+".")}var c=function(e){for(var s=5381,t=e.length;t;)s=33*s^e.charCodeAt(--t);return s>>>0},u={};function p(e,s){if(!s)return"jsx-"+e;var t=String(s),i=e+t;return u[i]||(u[i]="jsx-"+c(e+"-"+t)),u[i]}function E(e,s){"undefined"==typeof window&&(s=s.replace(/\/style/gi,"\\/style"));var t=e+s;return u[t]||(u[t]=s.replace(/__jsx-style-dynamic-selector/g,e)),u[t]}var _=function(){function e(e){var s=void 0===e?{}:e,t=s.styleSheet,i=void 0===t?null:t,r=s.optimizeForSpeed,n=void 0!==r&&r;this._sheet=i||new l({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),i&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var s=e.prototype;return s.add=function(e){var s=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,s){return e[s]=0,e},{}));var t=this.getIdAndRules(e),i=t.styleId,r=t.rules;if(i in this._instancesCounts){this._instancesCounts[i]+=1;return}var n=r.map(function(e){return s._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[i]=n,this._instancesCounts[i]=1},s.remove=function(e){var s=this,t=this.getIdAndRules(e).styleId;if(function(e,s){if(!e)throw Error("StyleSheetRegistry: "+s+".")}(t in this._instancesCounts,"styleId: `"+t+"` not found"),this._instancesCounts[t]-=1,this._instancesCounts[t]<1){var i=this._fromServer&&this._fromServer[t];i?(i.parentNode.removeChild(i),delete this._fromServer[t]):(this._indices[t].forEach(function(e){return s._sheet.deleteRule(e)}),delete this._indices[t]),delete this._instancesCounts[t]}},s.update=function(e,s){this.add(s),this.remove(e)},s.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},s.cssRules=function(){var e=this,s=this._fromServer?Object.keys(this._fromServer).map(function(s){return[s,e._fromServer[s]]}):[],t=this._sheet.cssRules();return s.concat(Object.keys(this._indices).map(function(s){return[s,e._indices[s].map(function(e){return t[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},s.styles=function(e){var s,t;return s=this.cssRules(),void 0===(t=e)&&(t={}),s.map(function(e){var s=e[0],i=e[1];return n.default.createElement("style",{id:"__"+s,key:"__"+s,nonce:t.nonce?t.nonce:void 0,dangerouslySetInnerHTML:{__html:i}})})},s.getIdAndRules=function(e){var s=e.children,t=e.dynamic,i=e.id;if(t){var r=p(i,t);return{styleId:r,rules:Array.isArray(s)?s.map(function(e){return E(r,e)}):[E(r,s)]}}return{styleId:p(i),rules:Array.isArray(s)?s:[s]}},s.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,s){return e[s.id.slice(2)]=s,e},{})},e}(),x=r.createContext(null);function f(){return new _}function R(){return r.useContext(x)}x.displayName="StyleSheetContext";var T=n.default.useInsertionEffect||n.default.useLayoutEffect,g="undefined"!=typeof window?f():void 0;function h(e){var s=g||R();return s&&("undefined"==typeof window?s.add(e):T(function(){return s.add(e),function(){s.remove(e)}},[e.id,String(e.dynamic)])),null}h.dynamic=function(e){return e.map(function(e){return p(e[0],e[1])}).join(" ")},t.StyleRegistry=function(e){var s=e.registry,t=e.children,i=r.useContext(x),o=r.useState(function(){return i||s||f()})[0];return n.default.createElement(x.Provider,{value:o},t)},t.createStyleRegistry=f,t.style=h,t.useStyleRegistry=R},37902,(e,s,t)=>{s.exports=e.r(98547).style},47781,e=>{"use strict";var s=e.i(43476),t=e.i(37902),i=e.i(71645),r=e.i(5302),n=e.i(62972);function o({save:e}){return(0,s.jsxs)("header",{className:"jsx-31bbe961d907d93c village-header",children:[(0,s.jsxs)("div",{className:"jsx-31bbe961d907d93c header-content",children:[(0,s.jsx)("h1",{className:"jsx-31bbe961d907d93c village-title",children:"üè∞ Village"}),(0,s.jsxs)("div",{className:"jsx-31bbe961d907d93c currencies",children:[(0,s.jsxs)("div",{className:"jsx-31bbe961d907d93c currency-item gold",children:[(0,s.jsx)("span",{className:"jsx-31bbe961d907d93c icon",children:"üí∞"}),(0,s.jsx)("span",{className:"jsx-31bbe961d907d93c label",children:"GOLD"}),(0,s.jsx)("span",{className:"jsx-31bbe961d907d93c amount",children:e.currencies.gold.toLocaleString()})]}),(0,s.jsxs)("div",{className:"jsx-31bbe961d907d93c currency-item souls",children:[(0,s.jsx)("span",{className:"jsx-31bbe961d907d93c icon",children:"üëª"}),(0,s.jsx)("span",{className:"jsx-31bbe961d907d93c label",children:"SOULS"}),(0,s.jsx)("span",{className:"jsx-31bbe961d907d93c amount",children:e.currencies.souls.toLocaleString()})]})]}),(0,s.jsxs)("div",{className:"jsx-31bbe961d907d93c stats-summary",children:[(0,s.jsxs)("span",{className:"jsx-31bbe961d907d93c",children:["Runs: ",e.stats.totalRuns]}),(0,s.jsxs)("span",{className:"jsx-31bbe961d907d93c",children:["Deepest Floor: ",e.stats.deepestFloor]})]})]}),(0,s.jsx)(t.default,{id:"31bbe961d907d93c",children:".village-header.jsx-31bbe961d907d93c{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#00000080;border-bottom:3px solid gold;padding:20px}.header-content.jsx-31bbe961d907d93c{flex-wrap:wrap;justify-content:space-between;align-items:center;gap:20px;max-width:1200px;margin:0 auto;display:flex}.village-title.jsx-31bbe961d907d93c{text-shadow:2px 2px 4px #00000080;margin:0;font-size:32px;font-weight:700}.currencies.jsx-31bbe961d907d93c{gap:30px;display:flex}.currency-item.jsx-31bbe961d907d93c{background:#0000004d;border-radius:8px;align-items:center;gap:8px;padding:10px 20px;font-family:monospace;font-size:20px;display:flex}.currency-item.gold.jsx-31bbe961d907d93c{color:gold;border:2px solid gold}.currency-item.souls.jsx-31bbe961d907d93c{color:#8b00ff;border:2px solid #8b00ff}.currency-item.jsx-31bbe961d907d93c .icon.jsx-31bbe961d907d93c{font-size:28px}.currency-item.jsx-31bbe961d907d93c .label.jsx-31bbe961d907d93c{min-width:60px;font-weight:700}.currency-item.jsx-31bbe961d907d93c .amount.jsx-31bbe961d907d93c{text-align:right;min-width:80px;font-size:24px;font-weight:700}.stats-summary.jsx-31bbe961d907d93c{opacity:.8;gap:20px;font-size:14px;display:flex}"})]})}let a=[{id:"merchant",icon:"üè™",label:"Marchand",description:"Acheter items et potions"},{id:"training",icon:"‚öîÔ∏è",label:"Entra√Æneur",description:"Am√©liorer stats permanentes"},{id:"blacksmith",icon:"üî®",label:"Forgeron",description:"D√©bloquer √©quipements"},{id:"apothecary",icon:"üß™",label:"Apothicaire",description:"D√©bloquer potions"}];function l({activeNPC:e,onSelectNPC:i}){return(0,s.jsxs)("nav",{className:"jsx-41dcb7b9864fb438 village-navigation",children:[(0,s.jsx)("div",{className:"jsx-41dcb7b9864fb438 nav-content",children:a.map(t=>(0,s.jsxs)("button",{onClick:()=>i(t.id),className:`jsx-41dcb7b9864fb438 npc-tab ${e===t.id?"active":""}`,children:[(0,s.jsx)("span",{className:"jsx-41dcb7b9864fb438 tab-icon",children:t.icon}),(0,s.jsx)("span",{className:"jsx-41dcb7b9864fb438 tab-label",children:t.label}),(0,s.jsx)("span",{className:"jsx-41dcb7b9864fb438 tab-description",children:t.description})]},t.id))}),(0,s.jsx)(t.default,{id:"41dcb7b9864fb438",children:".village-navigation.jsx-41dcb7b9864fb438{background:#0000004d;border-bottom:2px solid #ffffff1a;padding:20px}.nav-content.jsx-41dcb7b9864fb438{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;max-width:1200px;margin:0 auto;display:grid}.npc-tab.jsx-41dcb7b9864fb438{cursor:pointer;color:#fff;background:#ffffff0d;border:2px solid #ffffff1a;border-radius:10px;flex-direction:column;align-items:center;padding:20px;transition:all .3s;display:flex}.npc-tab.jsx-41dcb7b9864fb438:hover{background:#ffffff1a;border-color:#ffffff4d;transform:translateY(-2px)}.npc-tab.active.jsx-41dcb7b9864fb438{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-color:gold;transform:translateY(-4px);box-shadow:0 4px 20px #667eea66}.tab-icon.jsx-41dcb7b9864fb438{margin-bottom:10px;font-size:48px}.tab-label.jsx-41dcb7b9864fb438{margin-bottom:5px;font-size:20px;font-weight:700}.tab-description.jsx-41dcb7b9864fb438{opacity:.8;text-align:center;font-size:14px}"})]})}let d={POTION_HEAL_TINY:25,POTION_HEAL_SMALL:50,POTION_HEAL_MEDIUM:100,POTION_HEAL_LARGE:200,POTION_HEAL_FULL:500,FOOD_BREAD:10,FOOD_APPLE:15,FOOD_MEAT:25,FOOD_CHEESE:30,FOOD_STEW:45,FOOD_ROAST:60,FOOD_FEAST:80,POTION_STRENGTH:300,POTION_DEFENSE:300,POTION_INVENTORY_EXPAND:400,POTION_REGENERATION:250,POTION_STRENGTH_TEMP:120,POTION_DEFENSE_TEMP:120,BANDAGE:30,ANTIDOTE_POISON:50,CURE_PARALYSIS:60,ELIXIR_CLARITY:50,BALM_SOOTHING:50,WATER_FIERY:50,SWORD_COPPER:150,SWORD_BRONZE:250,SWORD_IRON:400,SWORD_STEEL:600,SWORD_DIAMOND:900,AXE_COPPER:150,AXE_BRONZE:250,AXE_IRON:400,AXE_STEEL:600,AXE_DIAMOND:900,SPEAR_COPPER:150,SPEAR_BRONZE:250,SPEAR_IRON:400,SPEAR_STEEL:600,SPEAR_DIAMOND:900,ARMOR_CLOTH_LIGHT:100,ARMOR_CLOTH_HEAVY:120,ARMOR_LEATHER_LIGHT:160,ARMOR_LEATHER_HEAVY:190,ARMOR_IRON_LIGHT:260,ARMOR_IRON_HEAVY:300,ARMOR_STEEL_LIGHT:380,ARMOR_STEEL_HEAVY:430,ARMOR_DIAMOND_LIGHT:550,ARMOR_DIAMOND_HEAVY:620,HELMET_CLOTH_LIGHT:50,HELMET_CLOTH_HEAVY:60,HELMET_LEATHER_LIGHT:90,HELMET_LEATHER_HEAVY:105,HELMET_IRON_LIGHT:140,HELMET_IRON_HEAVY:165,HELMET_STEEL_LIGHT:210,HELMET_STEEL_HEAVY:240,HELMET_DIAMOND_LIGHT:300,HELMET_DIAMOND_HEAVY:340,SHIELD_WOOD_LIGHT:80,SHIELD_WOOD_HEAVY:100,SHIELD_LEATHER_LIGHT:140,SHIELD_LEATHER_HEAVY:170,SHIELD_IRON_LIGHT:220,SHIELD_IRON_HEAVY:260,SHIELD_STEEL_LIGHT:320,SHIELD_STEEL_HEAVY:370,SHIELD_DIAMOND_LIGHT:460,SHIELD_DIAMOND_HEAVY:520,RING_STRENGTH:180,RING_PROTECTION:180,RING_VITALITY:320,RING_BERSERKER:480,RING_GUARDIAN:480,AMULET_REGENERATION:350,AMULET_MAGE:550,AMULET_LEGENDARY:850};var c=e.i(54962),u=e.i(77757);let p={SWORD_COPPER:{id:"SWORD_COPPER",category:"WEAPON",tier:"STARTER",soulsCost:0,prerequisites:[],description:"√âp√©e de d√©part √©quilibr√©e"},SWORD_BRONZE:{id:"SWORD_BRONZE",category:"WEAPON",tier:"TIER1",soulsCost:3,prerequisites:["SWORD_COPPER"],description:"Am√©lioration simple"},SWORD_IRON:{id:"SWORD_IRON",category:"WEAPON",tier:"TIER2",soulsCost:6,prerequisites:["SWORD_BRONZE"],description:"√âp√©e solide en fer"},SWORD_STEEL:{id:"SWORD_STEEL",category:"WEAPON",tier:"TIER3",soulsCost:12,prerequisites:["SWORD_IRON"],description:"Acier de qualit√©"},SWORD_DIAMOND:{id:"SWORD_DIAMOND",category:"WEAPON",tier:"LEGENDARY",soulsCost:45,prerequisites:["SWORD_STEEL"],description:"Lame l√©gendaire en diamant"},AXE_COPPER:{id:"AXE_COPPER",category:"WEAPON",tier:"STARTER",soulsCost:2,prerequisites:[],description:"Hache brutale, d√©g√¢ts √©lev√©s"},AXE_BRONZE:{id:"AXE_BRONZE",category:"WEAPON",tier:"TIER1",soulsCost:4,prerequisites:["AXE_COPPER"],description:"Hache plus lourde"},AXE_IRON:{id:"AXE_IRON",category:"WEAPON",tier:"TIER2",soulsCost:7,prerequisites:["AXE_BRONZE"],description:"Fer massif"},AXE_STEEL:{id:"AXE_STEEL",category:"WEAPON",tier:"TIER3",soulsCost:14,prerequisites:["AXE_IRON"],description:"Tranchant d'acier"},AXE_DIAMOND:{id:"AXE_DIAMOND",category:"WEAPON",tier:"LEGENDARY",soulsCost:50,prerequisites:["AXE_STEEL"],description:"Hache l√©gendaire"},SPEAR_COPPER:{id:"SPEAR_COPPER",category:"WEAPON",tier:"STARTER",soulsCost:2,prerequisites:[],description:"Lance d√©fensive"},SPEAR_BRONZE:{id:"SPEAR_BRONZE",category:"WEAPON",tier:"TIER1",soulsCost:4,prerequisites:["SPEAR_COPPER"],description:"Lance plus robuste"},SPEAR_IRON:{id:"SPEAR_IRON",category:"WEAPON",tier:"TIER2",soulsCost:7,prerequisites:["SPEAR_BRONZE"],description:"Fer √©quilibr√©"},SPEAR_STEEL:{id:"SPEAR_STEEL",category:"WEAPON",tier:"TIER3",soulsCost:14,prerequisites:["SPEAR_IRON"],description:"Acier pr√©cis"},SPEAR_DIAMOND:{id:"SPEAR_DIAMOND",category:"WEAPON",tier:"LEGENDARY",soulsCost:45,prerequisites:["SPEAR_STEEL"],description:"Lance l√©gendaire"},ARMOR_CLOTH_LIGHT:{id:"ARMOR_CLOTH_LIGHT",category:"ARMOR",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Armure l√©g√®re en tissu"},ARMOR_LEATHER_LIGHT:{id:"ARMOR_LEATHER_LIGHT",category:"ARMOR",tier:"TIER1",soulsCost:3,prerequisites:["ARMOR_CLOTH_LIGHT"],description:"Cuir souple"},ARMOR_IRON_LIGHT:{id:"ARMOR_IRON_LIGHT",category:"ARMOR",tier:"TIER2",soulsCost:6,prerequisites:["ARMOR_LEATHER_LIGHT"],description:"Fer √©quilibr√©"},ARMOR_STEEL_LIGHT:{id:"ARMOR_STEEL_LIGHT",category:"ARMOR",tier:"TIER3",soulsCost:12,prerequisites:["ARMOR_IRON_LIGHT"],description:"Acier fiable"},ARMOR_DIAMOND_LIGHT:{id:"ARMOR_DIAMOND_LIGHT",category:"ARMOR",tier:"LEGENDARY",soulsCost:45,prerequisites:["ARMOR_STEEL_LIGHT"],description:"Armure l√©g√®re l√©gendaire"},ARMOR_CLOTH_HEAVY:{id:"ARMOR_CLOTH_HEAVY",category:"ARMOR",tier:"STARTER",soulsCost:2,prerequisites:["ARMOR_CLOTH_LIGHT"],description:"Tissu renforc√©"},ARMOR_LEATHER_HEAVY:{id:"ARMOR_LEATHER_HEAVY",category:"ARMOR",tier:"TIER1",soulsCost:4,prerequisites:["ARMOR_CLOTH_HEAVY"],description:"Cuir renforc√©"},ARMOR_IRON_HEAVY:{id:"ARMOR_IRON_HEAVY",category:"ARMOR",tier:"TIER2",soulsCost:8,prerequisites:["ARMOR_LEATHER_HEAVY"],description:"Fer renforc√©"},ARMOR_STEEL_HEAVY:{id:"ARMOR_STEEL_HEAVY",category:"ARMOR",tier:"TIER3",soulsCost:16,prerequisites:["ARMOR_IRON_HEAVY"],description:"Acier renforc√©"},ARMOR_DIAMOND_HEAVY:{id:"ARMOR_DIAMOND_HEAVY",category:"ARMOR",tier:"LEGENDARY",soulsCost:55,prerequisites:["ARMOR_STEEL_HEAVY"],description:"Armure lourde l√©gendaire"},HELMET_CLOTH_LIGHT:{id:"HELMET_CLOTH_LIGHT",category:"HELMET",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Capuche de tissu"},HELMET_LEATHER_LIGHT:{id:"HELMET_LEATHER_LIGHT",category:"HELMET",tier:"TIER1",soulsCost:2,prerequisites:["HELMET_CLOTH_LIGHT"],description:"Cuir l√©ger"},HELMET_IRON_LIGHT:{id:"HELMET_IRON_LIGHT",category:"HELMET",tier:"TIER2",soulsCost:5,prerequisites:["HELMET_LEATHER_LIGHT"],description:"Fer √©quilibr√©"},HELMET_STEEL_LIGHT:{id:"HELMET_STEEL_LIGHT",category:"HELMET",tier:"TIER3",soulsCost:10,prerequisites:["HELMET_IRON_LIGHT"],description:"Acier solide"},HELMET_DIAMOND_LIGHT:{id:"HELMET_DIAMOND_LIGHT",category:"HELMET",tier:"LEGENDARY",soulsCost:40,prerequisites:["HELMET_STEEL_LIGHT"],description:"Casque l√©ger l√©gendaire"},HELMET_CLOTH_HEAVY:{id:"HELMET_CLOTH_HEAVY",category:"HELMET",tier:"STARTER",soulsCost:1,prerequisites:["HELMET_CLOTH_LIGHT"],description:"Tissu renforc√©"},HELMET_LEATHER_HEAVY:{id:"HELMET_LEATHER_HEAVY",category:"HELMET",tier:"TIER1",soulsCost:3,prerequisites:["HELMET_CLOTH_HEAVY"],description:"Cuir renforc√©"},HELMET_IRON_HEAVY:{id:"HELMET_IRON_HEAVY",category:"HELMET",tier:"TIER2",soulsCost:6,prerequisites:["HELMET_LEATHER_HEAVY"],description:"Fer renforc√©"},HELMET_STEEL_HEAVY:{id:"HELMET_STEEL_HEAVY",category:"HELMET",tier:"TIER3",soulsCost:12,prerequisites:["HELMET_IRON_HEAVY"],description:"Acier renforc√©"},HELMET_DIAMOND_HEAVY:{id:"HELMET_DIAMOND_HEAVY",category:"HELMET",tier:"LEGENDARY",soulsCost:45,prerequisites:["HELMET_STEEL_HEAVY"],description:"Casque lourd l√©gendaire"},SHIELD_WOOD_LIGHT:{id:"SHIELD_WOOD_LIGHT",category:"OFFHAND",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Bouclier en bois"},SHIELD_LEATHER_LIGHT:{id:"SHIELD_LEATHER_LIGHT",category:"OFFHAND",tier:"TIER1",soulsCost:3,prerequisites:["SHIELD_WOOD_LIGHT"],description:"Bouclier en cuir"},SHIELD_IRON_LIGHT:{id:"SHIELD_IRON_LIGHT",category:"OFFHAND",tier:"TIER2",soulsCost:6,prerequisites:["SHIELD_LEATHER_LIGHT"],description:"Bouclier en fer"},SHIELD_STEEL_LIGHT:{id:"SHIELD_STEEL_LIGHT",category:"OFFHAND",tier:"TIER3",soulsCost:12,prerequisites:["SHIELD_IRON_LIGHT"],description:"Bouclier en acier"},SHIELD_DIAMOND_LIGHT:{id:"SHIELD_DIAMOND_LIGHT",category:"OFFHAND",tier:"LEGENDARY",soulsCost:42,prerequisites:["SHIELD_STEEL_LIGHT"],description:"Bouclier l√©gendaire"},SHIELD_WOOD_HEAVY:{id:"SHIELD_WOOD_HEAVY",category:"OFFHAND",tier:"STARTER",soulsCost:1,prerequisites:["SHIELD_WOOD_LIGHT"],description:"Bois renforc√©"},SHIELD_LEATHER_HEAVY:{id:"SHIELD_LEATHER_HEAVY",category:"OFFHAND",tier:"TIER1",soulsCost:4,prerequisites:["SHIELD_WOOD_HEAVY"],description:"Cuir renforc√©"},SHIELD_IRON_HEAVY:{id:"SHIELD_IRON_HEAVY",category:"OFFHAND",tier:"TIER2",soulsCost:8,prerequisites:["SHIELD_LEATHER_HEAVY"],description:"Fer renforc√©"},SHIELD_STEEL_HEAVY:{id:"SHIELD_STEEL_HEAVY",category:"OFFHAND",tier:"TIER3",soulsCost:16,prerequisites:["SHIELD_IRON_HEAVY"],description:"Acier renforc√©"},SHIELD_DIAMOND_HEAVY:{id:"SHIELD_DIAMOND_HEAVY",category:"OFFHAND",tier:"LEGENDARY",soulsCost:50,prerequisites:["SHIELD_STEEL_HEAVY"],description:"Bouclier lourd l√©gendaire"},RING_STRENGTH:{id:"RING_STRENGTH",category:"RING",tier:"TIER1",soulsCost:3,prerequisites:[],description:"Anneau de force"},RING_PROTECTION:{id:"RING_PROTECTION",category:"RING",tier:"TIER1",soulsCost:3,prerequisites:[],description:"Anneau de protection"},RING_VITALITY:{id:"RING_VITALITY",category:"RING",tier:"TIER2",soulsCost:8,prerequisites:["RING_PROTECTION"],description:"Anneau de vitalit√©"},RING_BERSERKER:{id:"RING_BERSERKER",category:"RING",tier:"TIER3",soulsCost:14,prerequisites:["RING_STRENGTH"],description:"Anneau du berserker"},RING_GUARDIAN:{id:"RING_GUARDIAN",category:"RING",tier:"TIER3",soulsCost:14,prerequisites:["RING_PROTECTION"],description:"Anneau du gardien"},AMULET_REGENERATION:{id:"AMULET_REGENERATION",category:"AMULET",tier:"TIER2",soulsCost:8,prerequisites:[],description:"Amulette de r√©g√©n√©ration"},AMULET_MAGE:{id:"AMULET_MAGE",category:"AMULET",tier:"TIER3",soulsCost:16,prerequisites:["AMULET_REGENERATION"],description:"Amulette du mage"},AMULET_LEGENDARY:{id:"AMULET_LEGENDARY",category:"AMULET",tier:"LEGENDARY",soulsCost:55,prerequisites:["AMULET_MAGE"],description:"Amulette l√©gendaire"}};function E(e,s){let t=p[e];return!!t&&t.prerequisites.every(e=>s.includes(e))}let _={STARTER:0,TIER1:1,TIER2:2,TIER3:3,TIER4:4,LEGENDARY:5},x={STARTER:"Starter",TIER1:"Tier 1",TIER2:"Tier 2",TIER3:"Tier 3",TIER4:"Tier 4",LEGENDARY:"Legendary"},f={STARTER:{background:"rgba(255, 255, 255, 0.08)",color:"#dcdcdc"},TIER1:{background:"rgba(90, 200, 140, 0.2)",color:"#6bd199"},TIER2:{background:"rgba(80, 160, 255, 0.2)",color:"#6aa7ff"},TIER3:{background:"rgba(220, 140, 60, 0.2)",color:"#e5a25e"},TIER4:{background:"rgba(200, 100, 220, 0.2)",color:"#d48fe0"},LEGENDARY:{background:"rgba(255, 210, 90, 0.25)",color:"#ffd27a"}},R={WEAPON:"Armes",ARMOR:"Armures",HELMET:"Casques",OFFHAND:"Boucliers",RING:"Anneaux",AMULET:"Amulettes"},T={display:"flex",flexDirection:"column",gap:"20px",padding:"20px"},g={display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:"20px"},h={fontSize:"32px",margin:0},O={marginTop:"6px",opacity:.7},b={padding:"10px 14px",borderRadius:"10px",background:"rgba(255, 215, 0, 0.12)",border:"1px solid rgba(255, 215, 0, 0.35)",fontWeight:"bold",minWidth:"140px",textAlign:"center"},A={position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:9999,background:"linear-gradient(135deg, #ff4444 0%, #cc0000 100%)",border:"2px solid #ff6666",borderRadius:"8px",padding:"16px 24px",display:"flex",alignItems:"center",gap:"12px",boxShadow:"0 4px 20px rgba(255, 68, 68, 0.4)"},m={fontSize:"24px",filter:"drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5))"},I={color:"white",fontWeight:"bold",fontSize:"18px",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"},y={display:"flex",flexWrap:"wrap",gap:"8px"},N={padding:"8px 16px",borderRadius:"999px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",cursor:"pointer",fontWeight:600,transition:"all 0.2s"},L={background:"#FFD700",color:"#1b130a",border:"1px solid #FFD700",fontWeight:"bold"},S={display:"flex",flexDirection:"column",gap:"10px",maxHeight:"520px",overflowY:"auto",padding:"14px",borderRadius:"12px",background:"linear-gradient(180deg, rgba(44, 33, 22, 0.55) 0%, rgba(30, 22, 16, 0.5) 100%), repeating-linear-gradient(90deg, rgba(120, 84, 48, 0.18) 0 6px, rgba(120, 84, 48, 0.1) 6px 12px)",border:"1px solid rgba(180, 130, 80, 0.35)",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.04)"},H={display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",padding:"12px 14px",borderRadius:"10px",border:"1px solid rgba(170, 120, 70, 0.35)",background:"linear-gradient(180deg, rgba(48, 36, 24, 0.75) 0%, rgba(34, 26, 18, 0.78) 100%)",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.22)",transition:"transform 0.16s ease, box-shadow 0.16s ease, border-color 0.16s ease"},j={display:"flex",alignItems:"center",gap:"12px",minWidth:0},v={width:"38px",height:"38px",borderRadius:"7px",display:"flex",alignItems:"center",justifyContent:"center",background:"radial-gradient(circle at 30% 30%, rgba(210, 170, 120, 0.25), rgba(0, 0, 0, 0.55))",border:"1px solid rgba(170, 120, 70, 0.4)",boxShadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.35)",fontFamily:'"Courier New", Courier, monospace',fontSize:"20px",flexShrink:0},D={display:"flex",flexDirection:"column",gap:"4px",minWidth:0},C={display:"flex",alignItems:"baseline",gap:"10px",minWidth:0},M={fontWeight:700,fontSize:"16px",letterSpacing:"0.1px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},P={fontSize:"13px",opacity:.65,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"320px"},F={padding:"4px 8px",borderRadius:"999px",fontSize:"11px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.4px"},G={display:"flex",alignItems:"center",gap:"10px",flexShrink:0},q={fontSize:"12px",opacity:.8},Y={padding:"8px 14px",borderRadius:"7px",border:"1px solid rgba(255, 255, 255, 0.15)",background:"linear-gradient(135deg, #c79a5f 0%, #9a6a36 100%)",color:"white",fontWeight:700,cursor:"pointer",minWidth:"74px",textShadow:"0 1px 0 rgba(0, 0, 0, 0.35)",transition:"all 0.2s"},w={background:"linear-gradient(135deg, #3a3a3a 0%, #2a2a2a 100%)",color:"#777",cursor:"not-allowed"},k={padding:"8px 12px",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.5)",background:"rgba(255, 215, 0, 0.2)",color:"#ffdf9a",fontWeight:700,cursor:"pointer",transition:"all 0.2s"},V={border:"1px solid rgba(255, 255, 255, 0.15)",background:"rgba(255, 255, 255, 0.06)",color:"rgba(255, 255, 255, 0.45)",cursor:"not-allowed"},z={borderRadius:"12px",padding:"16px",background:"rgba(18, 14, 10, 0.6)",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",gap:"12px"},W={margin:0,color:"#FFD700"},B={display:"flex",justifyContent:"space-between",fontSize:"13px",opacity:.8},U={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"4px",fontSize:"14px"},X={background:"none",border:"none",color:"#ff5252",cursor:"pointer",fontWeight:"bold",padding:"0 5px"},Z={marginTop:"20px",paddingTop:"10px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"12px",fontWeight:"bold",opacity:.7,display:"flex",justifyContent:"space-between",alignItems:"center"},K={color:"#ff5252"},$={color:"#ff5252",fontSize:"10px",fontWeight:"bold"},J={textAlign:"center",marginTop:"40px",opacity:.3,fontStyle:"italic"},Q={fontSize:"12px",opacity:.5,marginBottom:"20px"},ee={opacity:.7,fontStyle:"italic"};function es({save:e,onRefresh:t}){let[n,o]=(0,i.useState)("consumables"),[a,l]=(0,i.useState)(""),E=s=>{let i=d[e.startingInventory[s]]||0,n=(0,r.loadSave)();n.currencies.gold+=i,n.startingInventory.splice(s,1),(0,r.saveToDisk)(n),t()};(0,i.useEffect)(()=>{if(a){let e=setTimeout(()=>{l("")},3e3);return()=>clearTimeout(e)}},[a]);let _=i=>{let n,o=d[i];if(void 0===o)return null;try{n=(0,c.createItemFromTemplate)(i)}catch{return null}let a=e.currencies.gold>=o,p=e.startingInventory.length>=u.MAX_INVENTORY_SIZE,E=a&&!p;return(0,s.jsxs)("div",{className:"village-item-card",style:H,children:[(0,s.jsxs)("div",{style:j,children:[(0,s.jsx)("span",{style:{...v,color:n.renderable.color},children:n.renderable.char}),(0,s.jsxs)("div",{style:C,children:[(0,s.jsx)("span",{style:M,children:n.name}),(0,s.jsx)("span",{style:P,children:n.item.description})]})]}),(0,s.jsxs)("button",{className:"village-primary-button",onClick:()=>{let s;(s=(0,r.loadSave)()).startingInventory.length>=u.MAX_INVENTORY_SIZE?l(`Inventaire plein ! (Maximum: ${u.MAX_INVENTORY_SIZE} items)`):e.currencies.gold>=o?(s.currencies.gold-=o,s.startingInventory.push(i),(0,r.saveToDisk)(s),t()):l("Pas assez d'or !")},disabled:!E,style:E?Y:{...Y,...w},title:p?"Inventaire plein !":a?"":"Pas assez d'or",children:[o," üí∞"]})]},i)},x=new Set(e.unlockedConsumables??[]),f=["FOOD_BREAD","FOOD_APPLE","FOOD_MEAT","FOOD_CHEESE","FOOD_STEW","FOOD_ROAST","FOOD_FEAST","POTION_HEAL_TINY","POTION_HEAL_SMALL","POTION_HEAL_MEDIUM","POTION_HEAL_LARGE","POTION_HEAL_FULL","POTION_STRENGTH","POTION_DEFENSE","POTION_INVENTORY_EXPAND","POTION_REGENERATION","POTION_STRENGTH_TEMP","POTION_DEFENSE_TEMP","BANDAGE","ANTIDOTE_POISON","CURE_PARALYSIS","ELIXIR_CLARITY","BALM_SOOTHING","WATER_FIERY"].filter(e=>x.has(e)&&void 0!==d[e]),R=Object.keys(p).filter(e=>void 0!==d[e]),T=new Set(e.unlockedEquipment??[]),g=R.filter(e=>T.has(e));return(0,s.jsxs)("div",{className:"merchant-shop",style:{height:"100%",display:"flex",flexDirection:"column"},children:[a&&(0,s.jsxs)("div",{className:"village-error-banner",style:A,children:[(0,s.jsx)("span",{style:m,children:"‚ö†Ô∏è"}),(0,s.jsx)("span",{style:I,children:a})]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 300px",gap:"30px",height:"100%"},children:[(0,s.jsxs)("div",{className:"shop-main",children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,s.jsx)("h2",{style:h,children:"üè™ Marchand"}),(0,s.jsxs)("div",{style:y,children:[(0,s.jsx)("button",{className:"village-category-button",onClick:()=>o("consumables"),style:"consumables"===n?{...N,...L}:N,children:"Consommables"}),(0,s.jsx)("button",{className:"village-category-button",onClick:()=>o("gear"),style:"gear"===n?{...N,...L}:N,children:"√âquipement"})]})]}),(0,s.jsxs)("div",{className:"village-item-list",style:S,children:["consumables"===n&&(f.length>0?f.map(e=>_(e)):(0,s.jsx)("p",{style:ee,children:"Aucun consommable d√©bloqu√©. Visitez l'Apothicaire !"})),"gear"===n&&(g.length>0?g.map(e=>_(e)):(0,s.jsx)("p",{style:ee,children:"Aucun √©quipement d√©bloqu√©. Visitez le Forgeron !"}))]})]}),(0,s.jsxs)("div",{style:z,children:[(0,s.jsx)("h3",{style:W,children:"üéí Pack de D√©part"}),(0,s.jsx)("p",{style:Q,children:"Items qui seront dans votre inventaire au d√©but du prochain run."}),(0,s.jsx)("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"8px",overflowY:"auto"},children:0===e.startingInventory.length?(0,s.jsx)("p",{style:J,children:"Votre sac est vide."}):e.startingInventory.map((e,t)=>{let i;try{i=(0,c.createItemFromTemplate)(e)}catch{return(0,s.jsxs)("div",{style:U,children:[(0,s.jsxs)("span",{children:["Unknown Item (",e,")"]}),(0,s.jsx)("button",{onClick:()=>E(t),style:X,children:"‚úï"})]},t)}return(0,s.jsxs)("div",{style:U,children:[(0,s.jsx)("span",{children:i.name}),(0,s.jsx)("button",{onClick:()=>E(t),style:X,children:"‚úï"})]},t)})}),(0,s.jsxs)("div",{style:Z,children:[(0,s.jsxs)("span",{style:e.startingInventory.length>=u.MAX_INVENTORY_SIZE?K:void 0,children:["Items: ",e.startingInventory.length," / ",u.MAX_INVENTORY_SIZE]}),e.startingInventory.length>=u.MAX_INVENTORY_SIZE&&(0,s.jsx)("span",{className:"village-pulse",style:$,children:"‚ö†Ô∏è PLEIN"})]})]})]})]})}let et={maxHp:{baseCost:2,costIncrement:1,bonus:10,maxLevel:20,label:"Max HP",bonusLabel:"+10 HP permanent",icon:"‚ù§Ô∏è"},attack:{baseCost:3,costIncrement:1,bonus:3,maxLevel:15,label:"Attaque",bonusLabel:"+3 ATK permanent",icon:"üó°Ô∏è"},defense:{baseCost:3,costIncrement:1,bonus:3,maxLevel:15,label:"Defense",bonusLabel:"+3 DEF permanent",icon:"üõ°Ô∏è"},inventorySlots:{baseCost:5,costIncrement:2,bonus:2,maxLevel:5,label:"Inventaire",bonusLabel:"+2 slots permanents",icon:"üéí"}},ei=["maxHp","attack","defense","inventorySlots"],er=(e,s)=>{let t=et[e];return t.baseCost+s*t.costIncrement};function en({save:e,onRefresh:n}){let[o,a]=(0,i.useState)("");return(0,i.useEffect)(()=>{if(!o)return;let e=setTimeout(()=>a(""),2500);return()=>clearTimeout(e)},[o]),(0,s.jsxs)("div",{className:"jsx-980fc34f14c94247 training-hall",children:[(0,s.jsx)("h2",{className:"jsx-980fc34f14c94247",children:"‚öîÔ∏è Entra√Æneur"}),(0,s.jsx)("p",{className:"jsx-980fc34f14c94247",children:"Am√©liorez vos stats de mani√®re permanente."}),(0,s.jsxs)("div",{className:"jsx-980fc34f14c94247 souls-status",children:[(0,s.jsxs)("span",{className:"jsx-980fc34f14c94247",children:["üëª Souls: ",e.currencies.souls]}),o&&(0,s.jsx)("span",{className:"jsx-980fc34f14c94247 message",children:o})]}),(0,s.jsx)("div",{className:"jsx-980fc34f14c94247 training-grid",children:ei.map(t=>{let i=et[t],o=e.persistentStats[t],l=er(t,o),d=o>=i.maxLevel,c=e.currencies.souls>=l,u=!d&&c;return(0,s.jsxs)("div",{className:"jsx-980fc34f14c94247 training-card",children:[(0,s.jsxs)("div",{className:"jsx-980fc34f14c94247 card-header",children:[(0,s.jsx)("span",{className:"jsx-980fc34f14c94247 icon",children:i.icon}),(0,s.jsxs)("div",{className:"jsx-980fc34f14c94247",children:[(0,s.jsx)("h3",{className:"jsx-980fc34f14c94247",children:i.label}),(0,s.jsx)("p",{className:"jsx-980fc34f14c94247 bonus",children:i.bonusLabel})]})]}),(0,s.jsxs)("div",{className:"jsx-980fc34f14c94247 card-details",children:[(0,s.jsxs)("span",{className:"jsx-980fc34f14c94247",children:["Niveau ",o," / ",i.maxLevel]}),(0,s.jsxs)("span",{className:"jsx-980fc34f14c94247 "+((c?"cost":"cost low")||""),children:["Cout: ",l," souls"]})]}),(0,s.jsx)("button",{onClick:()=>(e=>{try{let s=(0,r.loadSave)(),t=s.persistentStats[e],i=et[e],o=er(e,t);if(t>=i.maxLevel)return void a("Niveau maximum atteint.");if(s.currencies.souls<o)return void a("Pas assez de souls.");let l={...s,currencies:{...s.currencies,souls:s.currencies.souls-o},persistentStats:{...s.persistentStats,[e]:t+1}};(0,r.saveToDisk)(l),n(),a(`${i.label} amelioree.`)}catch(e){console.error("Failed to upgrade stat:",e),a("Erreur lors de la sauvegarde.")}})(t),disabled:!u,className:`jsx-980fc34f14c94247 upgrade-button ${u?"":"disabled"}`,children:d?"Max":"Ameliorer"})]},t)})}),(0,s.jsx)(t.default,{id:"980fc34f14c94247",children:".training-hall.jsx-980fc34f14c94247{padding:20px}h2.jsx-980fc34f14c94247{margin-bottom:10px;font-size:32px}.souls-status.jsx-980fc34f14c94247{align-items:center;gap:16px;margin:20px 0 30px;font-size:18px;display:flex}.message.jsx-980fc34f14c94247{opacity:.8;font-size:14px}.training-grid.jsx-980fc34f14c94247{grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;display:grid}.training-card.jsx-980fc34f14c94247{background:#00000059;border:2px solid #ffffff1a;border-radius:12px;flex-direction:column;gap:12px;padding:16px;display:flex}.card-header.jsx-980fc34f14c94247{align-items:center;gap:10px;display:flex}.icon.jsx-980fc34f14c94247{font-size:24px}.bonus.jsx-980fc34f14c94247{opacity:.7;margin:2px 0 0;font-size:14px}.card-details.jsx-980fc34f14c94247{justify-content:space-between;font-size:14px;display:flex}.cost.low.jsx-980fc34f14c94247{color:#ffb3b3}.upgrade-button.jsx-980fc34f14c94247{color:#fff;cursor:pointer;background:#2e7d32;border:none;border-radius:8px;padding:10px 12px;font-weight:600}.upgrade-button.disabled.jsx-980fc34f14c94247{cursor:not-allowed;opacity:.6;background:#444}"})]})}function eo({save:e,onRefresh:t}){let[n,o]=(0,i.useState)("WEAPON"),[a,l]=(0,i.useState)("");(0,i.useEffect)(()=>{if(a){let e=setTimeout(()=>l(""),3e3);return()=>clearTimeout(e)}},[a]);let d=e.unlockedEquipment??[],u=(0,i.useMemo)(()=>Object.values(p).filter(e=>e.category===n).sort((e,s)=>{let t=_[e.tier]-_[s.tier];return 0!==t?t:e.id.localeCompare(s.id)}),[n]),A={...S,maxHeight:"none",padding:0,background:"none",border:"none",boxShadow:"none"},m={...H,borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(20, 16, 12, 0.5)"},I=d.length;return(0,s.jsxs)("div",{className:"blacksmith",style:T,children:[(0,s.jsxs)("div",{style:g,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{style:h,children:"üî® Forgeron"}),(0,s.jsx)("p",{style:O,children:"D√©bloquez et am√©liorez vos √©quipements."})]}),(0,s.jsxs)("div",{style:b,children:["√Çmes: ",e.currencies.souls]})]}),a&&(0,s.jsx)("div",{className:"village-error-banner",style:{background:"rgba(255, 70, 70, 0.15)",border:"1px solid rgba(255, 70, 70, 0.35)",color:"#ff9a9a",padding:"10px 14px",borderRadius:"8px",fontWeight:"bold"},children:a}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) 280px",gap:"20px"},children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,s.jsx)("div",{style:y,children:Object.entries(R).map(([e,t])=>(0,s.jsx)("button",{className:"village-category-button",onClick:()=>o(e),style:n===e?{...N,...L}:N,children:t},e))}),(0,s.jsx)("div",{style:A,children:u.map(i=>{let n=d.includes(i.id),o=E(i.id,d),a=e.currencies.souls>=i.soulsCost,u=!n&&o&&a,p=i.id,_=i.description,R="?",T="#ffd27a";try{let e=(0,c.createItemFromTemplate)(i.id);p=e.name,_=e.item.description||i.description,R=e.renderable.char,T=e.renderable.color}catch{}return(0,s.jsxs)("div",{className:"village-item-card",style:m,children:[(0,s.jsxs)("div",{style:j,children:[(0,s.jsx)("div",{style:{...v,color:T},children:R}),(0,s.jsxs)("div",{style:D,children:[(0,s.jsx)("span",{style:M,children:p}),(0,s.jsx)("span",{style:P,children:_})]})]}),(0,s.jsxs)("div",{style:G,children:[(0,s.jsx)("span",{style:{...F,...f[i.tier]},children:x[i.tier]}),(0,s.jsxs)("span",{style:q,children:[i.soulsCost," √Çmes"]}),(0,s.jsx)("button",{className:"village-unlock-button",onClick:()=>(e=>{let s=(0,r.loadSave)();if(!s.unlockedEquipment.includes(e.id)){if(!E(e.id,s.unlockedEquipment))return void l("Pr√©requis manquants.");if(s.currencies.souls<e.soulsCost)return void l("Pas assez d'√¢mes.");s.currencies.souls-=e.soulsCost,s.unlockedEquipment.push(e.id),(0,r.saveToDisk)(s),t()}})(i),disabled:!u,style:u?k:{...k,...V},title:n?"D√©j√† d√©bloqu√©":o?a?"D√©bloquer":"√Çmes insuffisantes":"Pr√©requis manquants",children:n?"D√©bloqu√©":"D√©bloquer"})]})]},i.id)})})]}),(0,s.jsxs)("div",{style:z,children:[(0,s.jsx)("h3",{style:W,children:"Progression"}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"D√©bloqu√©s"}),(0,s.jsx)("span",{children:I})]}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"Cat√©gorie"}),(0,s.jsxs)("span",{children:[u.filter(e=>d.includes(e.id)).length,"/",u.length]})]}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"Total disponibles"}),(0,s.jsx)("span",{children:u.length})]}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"√Çmes restantes"}),(0,s.jsx)("span",{children:e.currencies.souls})]})]})]})]})}e.i(47167);let ea={FOOD_BREAD:{id:"FOOD_BREAD",category:"FOOD",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Restaure 5 HP"},FOOD_APPLE:{id:"FOOD_APPLE",category:"FOOD",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Restaure 10 HP"},FOOD_MEAT:{id:"FOOD_MEAT",category:"FOOD",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Restaure 15 HP"},FOOD_CHEESE:{id:"FOOD_CHEESE",category:"FOOD",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Restaure 20 HP"},FOOD_STEW:{id:"FOOD_STEW",category:"FOOD",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Restaure 30 HP"},FOOD_ROAST:{id:"FOOD_ROAST",category:"FOOD",tier:"TIER1",soulsCost:2,prerequisites:[],description:"Restaure 40 HP"},FOOD_FEAST:{id:"FOOD_FEAST",category:"FOOD",tier:"TIER2",soulsCost:3,prerequisites:[],description:"Restaure 50 HP"},POTION_HEAL_TINY:{id:"POTION_HEAL_TINY",category:"POTION_HEAL",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Restaure 15 HP"},POTION_HEAL_SMALL:{id:"POTION_HEAL_SMALL",category:"POTION_HEAL",tier:"STARTER",soulsCost:0,prerequisites:[],description:"Restaure 30 HP"},POTION_HEAL_MEDIUM:{id:"POTION_HEAL_MEDIUM",category:"POTION_HEAL",tier:"TIER2",soulsCost:3,prerequisites:["POTION_HEAL_SMALL"],description:"Restaure 50 HP"},POTION_HEAL_LARGE:{id:"POTION_HEAL_LARGE",category:"POTION_HEAL",tier:"TIER3",soulsCost:6,prerequisites:["POTION_HEAL_MEDIUM"],description:"Restaure 75 HP"},POTION_HEAL_FULL:{id:"POTION_HEAL_FULL",category:"POTION_HEAL",tier:"LEGENDARY",soulsCost:15,prerequisites:["POTION_HEAL_LARGE"],description:"Restaure 100% HP"},POTION_STRENGTH:{id:"POTION_STRENGTH",category:"POTION_BUFF",tier:"TIER2",soulsCost:8,prerequisites:[],description:"+1 ATK permanent"},POTION_DEFENSE:{id:"POTION_DEFENSE",category:"POTION_BUFF",tier:"TIER2",soulsCost:8,prerequisites:[],description:"+1 DEF permanent"},POTION_INVENTORY_EXPAND:{id:"POTION_INVENTORY_EXPAND",category:"POTION_BUFF",tier:"TIER2",soulsCost:10,prerequisites:[],description:"+1 slot inventaire"},POTION_REGENERATION:{id:"POTION_REGENERATION",category:"POTION_BUFF",tier:"TIER3",soulsCost:12,prerequisites:[],description:"R√©g√©n√®re 100 HP sur 10 tours"},POTION_STRENGTH_TEMP:{id:"POTION_STRENGTH_TEMP",category:"POTION_BUFF",tier:"TIER2",soulsCost:5,prerequisites:[],description:"+5 ATK pendant 8 tours"},POTION_DEFENSE_TEMP:{id:"POTION_DEFENSE_TEMP",category:"POTION_BUFF",tier:"TIER2",soulsCost:5,prerequisites:[],description:"+5 DEF pendant 8 tours"},BANDAGE:{id:"BANDAGE",category:"REMEDY",tier:"TIER1",soulsCost:2,prerequisites:[],description:"Stoppe les saignements"},ANTIDOTE_POISON:{id:"ANTIDOTE_POISON",category:"REMEDY",tier:"TIER1",soulsCost:3,prerequisites:[],description:"Neutralise le poison"},CURE_PARALYSIS:{id:"CURE_PARALYSIS",category:"REMEDY",tier:"TIER1",soulsCost:3,prerequisites:[],description:"Gu√©rit la paralysie"},ELIXIR_CLARITY:{id:"ELIXIR_CLARITY",category:"REMEDY",tier:"TIER1",soulsCost:3,prerequisites:[],description:"Gu√©rit la confusion"},BALM_SOOTHING:{id:"BALM_SOOTHING",category:"REMEDY",tier:"TIER1",soulsCost:3,prerequisites:[],description:"√âteint les flammes"},WATER_FIERY:{id:"WATER_FIERY",category:"REMEDY",tier:"TIER1",soulsCost:3,prerequisites:[],description:"D√©g√®le le corps"}},el={FOOD:"üçñ Nourriture",POTION_HEAL:"‚ù§Ô∏è Potions de Soin",POTION_BUFF:"‚ö° Potions de Buff",REMEDY:"üíä Rem√®des"},ed=["FOOD","POTION_HEAL","POTION_BUFF","REMEDY"];function ec(e,s){let t=ea[e];return!!t&&t.prerequisites.every(e=>s.includes(e))}function eu({save:e,onRefresh:t}){let[n,o]=(0,i.useState)("POTION_HEAL"),[a,l]=(0,i.useState)("");(0,i.useEffect)(()=>{if(a){let e=setTimeout(()=>l(""),3e3);return()=>clearTimeout(e)}},[a]);let d=e.unlockedConsumables??[],u=(0,i.useMemo)(()=>{let e=e=>{try{let s=(0,c.createItemFromTemplate)(e.id);return s.consumable?.amount??0}catch{return 0}};return Object.values(ea).filter(e=>e.category===n).sort((s,t)=>{if("FOOD"===s.category||"POTION_HEAL"===s.category){let i=e(s)-e(t);if(0!==i)return i}let i=s.soulsCost-t.soulsCost;if(0!==i)return i;let r=_[s.tier]-_[t.tier];return 0!==r?r:s.id.localeCompare(t.id)})},[n]),p={...S,maxHeight:"none",padding:0,background:"none",border:"none",boxShadow:"none"},E={...H,borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",background:"rgba(20, 16, 12, 0.5)"},R=d.length;return(0,s.jsxs)("div",{className:"apothecary",style:T,children:[(0,s.jsxs)("div",{style:g,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{style:h,children:"üß™ Apothicaire"}),(0,s.jsx)("p",{style:O,children:"D√©bloquez potions et consommables."})]}),(0,s.jsxs)("div",{style:b,children:["√Çmes: ",e.currencies.souls]})]}),a&&(0,s.jsx)("div",{className:"village-error-banner",style:{background:"rgba(255, 70, 70, 0.15)",border:"1px solid rgba(255, 70, 70, 0.35)",color:"#ff9a9a",padding:"10px 14px",borderRadius:"8px",fontWeight:"bold"},children:a}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"minmax(0, 1fr) 280px",gap:"20px"},children:[(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,s.jsx)("div",{style:y,children:ed.map(e=>(0,s.jsx)("button",{className:"village-category-button",onClick:()=>o(e),style:n===e?{...N,...L}:N,children:el[e]},e))}),(0,s.jsx)("div",{style:p,children:u.map(i=>{let n=d.includes(i.id),o=ec(i.id,d),a=e.currencies.souls>=i.soulsCost,u=0===i.soulsCost,p=!n&&o&&(a||u),_=i.id,R=i.description,T="?",g="#ffd27a";try{let e=(0,c.createItemFromTemplate)(i.id);_=e.name,R=e.item.description||i.description,T=e.renderable.char,g=e.renderable.color}catch{}return(0,s.jsxs)("div",{className:"village-item-card",style:E,children:[(0,s.jsxs)("div",{style:j,children:[(0,s.jsx)("div",{style:{...v,color:g},children:T}),(0,s.jsxs)("div",{style:D,children:[(0,s.jsx)("span",{style:M,children:_}),(0,s.jsx)("span",{style:P,children:R})]})]}),(0,s.jsxs)("div",{style:G,children:[(0,s.jsx)("span",{style:{...F,...f[i.tier]},children:x[i.tier]}),(0,s.jsx)("span",{style:q,children:u?"Gratuit":`${i.soulsCost} \xc2mes`}),(0,s.jsx)("button",{className:"village-unlock-button",onClick:()=>(e=>{let s=(0,r.loadSave)(),i=s.unlockedConsumables??[];if(!i.includes(e.id)){if(!ec(e.id,i))return void l("Pr√©requis manquants.");if(s.currencies.souls<e.soulsCost)return void l("Pas assez d'√¢mes.");s.currencies.souls-=e.soulsCost,s.unlockedConsumables||(s.unlockedConsumables=[]),s.unlockedConsumables.push(e.id),(0,r.saveToDisk)(s),t()}})(i),disabled:!p,style:p?k:{...k,...V},title:n?"D√©j√† d√©bloqu√©":o?a||u?"D√©bloquer":"√Çmes insuffisantes":"Pr√©requis manquants",children:n?"D√©bloqu√©":"D√©bloquer"})]})]},i.id)})})]}),(0,s.jsxs)("div",{style:z,children:[(0,s.jsx)("h3",{style:W,children:"Progression"}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"D√©bloqu√©s"}),(0,s.jsx)("span",{children:R})]}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"Cat√©gorie"}),(0,s.jsxs)("span",{children:[u.filter(e=>d.includes(e.id)).length,"/",u.length]})]}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"Total disponibles"}),(0,s.jsx)("span",{children:u.length})]}),(0,s.jsxs)("div",{style:B,children:[(0,s.jsx)("span",{children:"√Çmes restantes"}),(0,s.jsx)("span",{children:e.currencies.souls})]})]})]})]})}Object.values(ea).filter(e=>"STARTER"===e.tier).map(e=>e.id);var ep=e.i(18566),eE=e.i(47830),e_=e.i(11742);function ex(){let e=(0,ep.useRouter)(),i=(0,e_.useGameStore)(e=>e.setRunInitialized);return(0,s.jsxs)("div",{className:"jsx-36179f3811be9828 enter-dungeon-container",children:[(0,s.jsxs)("button",{onClick:()=>{eE.world.clear(),i(!1),e.push("/game")},className:"jsx-36179f3811be9828 enter-button",children:[(0,s.jsx)("span",{className:"jsx-36179f3811be9828 button-icon",children:"üö™"}),(0,s.jsx)("span",{className:"jsx-36179f3811be9828 button-text",children:"ENTRER DANS LE DONJON"}),(0,s.jsx)("span",{className:"jsx-36179f3811be9828 button-subtitle",children:"Nouvelle run"})]}),(0,s.jsx)(t.default,{id:"36179f3811be9828",children:".enter-dungeon-container.jsx-36179f3811be9828{text-align:center;background:#0000004d;border-top:2px solid #ffffff1a;padding:30px}.enter-button.jsx-36179f3811be9828{color:#fff;cursor:pointer;background:linear-gradient(135deg,#f093fb 0%,#f5576c 100%);border:4px solid gold;border-radius:15px;flex-direction:column;align-items:center;padding:30px 60px;font-size:24px;font-weight:700;transition:all .3s;display:inline-flex;box-shadow:0 4px 20px #f5576c66}.enter-button.jsx-36179f3811be9828:hover{transform:scale(1.05);box-shadow:0 6px 30px #f5576c99}.enter-button.jsx-36179f3811be9828:active{transform:scale(.98)}.button-icon.jsx-36179f3811be9828{margin-bottom:10px;font-size:64px}.button-text.jsx-36179f3811be9828{text-shadow:2px 2px 4px #00000080;margin-bottom:5px;font-size:28px}.button-subtitle.jsx-36179f3811be9828{opacity:.9;font-size:16px;font-weight:400}"})]})}var ef=e.i(64455),eR=e.i(54408);function eT(){let[e,a]=(0,i.useState)("merchant"),[d,c]=(0,i.useState)(null),[u,p]=(0,i.useState)(!1),[E,_]=(0,i.useState)(!1);(0,i.useEffect)(()=>{c((0,r.loadSave)())},[]),(0,i.useEffect)(()=>{let e=e=>{if("h"===e.key.toLowerCase()||"Escape"===e.key){if(e.preventDefault(),"Escape"===e.key){if(E){n.audioManager.playUi("ui_close"),_(!1),p(!0);return}if(u){n.audioManager.playUi("ui_close"),p(!1);return}p(!0);return}if(u){n.audioManager.playUi("ui_close"),p(!1),_(!0);return}if(E){n.audioManager.playUi("ui_close"),_(!1);return}_(!0)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[E,u]);let x=()=>{c((0,r.loadSave)())};return d?(0,s.jsxs)("div",{className:"jsx-b651312a24b94c47 village-page",children:[(0,s.jsx)(o,{save:d}),(0,s.jsx)(ex,{}),(0,s.jsx)(l,{activeNPC:e,onSelectNPC:a}),(0,s.jsxs)("main",{className:"jsx-b651312a24b94c47 village-content",children:["merchant"===e&&(0,s.jsx)(es,{save:d,onRefresh:x}),"training"===e&&(0,s.jsx)(en,{save:d,onRefresh:x}),"blacksmith"===e&&(0,s.jsx)(eo,{save:d,onRefresh:x}),"apothecary"===e&&(0,s.jsx)(eu,{save:d,onRefresh:x})]}),(0,s.jsx)(ef.SettingsModal,{isOpen:u,onClose:()=>p(!1)}),(0,s.jsx)(eR.HelpModal,{isOpen:E,onClose:()=>_(!1)}),(0,s.jsx)(t.default,{id:"b651312a24b94c47",children:".village-page.jsx-b651312a24b94c47{color:#fff;background:linear-gradient(#1a1a2e,#16213e);flex-direction:column;min-height:100vh;display:flex}.loading-screen.jsx-b651312a24b94c47{justify-content:center;align-items:center;min-height:100vh;font-size:24px;display:flex}.village-content.jsx-b651312a24b94c47{flex:1;width:100%;max-width:1200px;margin:0 auto;padding:20px}"})]}):(0,s.jsx)("div",{className:"loading-screen",style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center",color:"white",backgroundColor:"#1a1a2e"},children:(0,s.jsx)("p",{children:"Chargement du village..."})})}e.s(["default",()=>eT],47781)}]);